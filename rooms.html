<!DOCTYPE html>
<html>
<head>
  <title>Rooms</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>❤️ AVAILABLE ROOMS ❤️</header>

<nav>
  <a href="index.html">Home</a>
  <a href="rooms.html">Rooms</a>
  <a href="roommates.html">Roommates</a>
  <a href="contact.html">Contact</a>
</nav>


<div class="filters">
  <input type="text" id="citySearch" placeholder="Search by city">

  <select id="typeFilter">
    <option value="">All Types</option>
    <option value="Single">Single Room</option>
    <option value="Shared">Shared Room</option>
    <option value="PG">PG</option>
  </select>

  <button onclick="applyFilter()">Search</button>
</div>


<div id="rooms"></div>


<script>
  let allRooms = [];

  fetch("http://localhost:3000/api/rooms")
    .then(res => res.json())
    .then(data => {
      allRooms = data;
      displayRooms(allRooms);
    });

  function displayRooms(rooms) {
    const container = document.getElementById("rooms");
    container.innerHTML = "";

    rooms.forEach(room => {
      container.innerHTML += `
        <div class="card ${room.type === 'PG' ? 'pg' : ''}">
          <h3>${room.type}</h3>
          <p>City: ${room.city}</p>
          <p>Rent: ₹${room.rent}</p>
        </div>
      `;
    });
  }

  function applyFilter() {
    const city = document.getElementById("citySearch").value.toLowerCase();
    const type = document.getElementById("typeFilter").value;

    const filtered = allRooms.filter(room => {
      return (
        (city === "" || room.city.toLowerCase().includes(city)) &&
        (type === "" || room.type === type)
      );
    });

    displayRooms(filtered);
  }
</script>

</body>
</html>